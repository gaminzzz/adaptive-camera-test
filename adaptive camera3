local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local camera = game.Workspace.CurrentCamera

local torso = character:WaitForChild("Torso") or character:WaitForChild("UpperTorso")  -- Check for both R15 and R6 rigs

local function updateCamera()
    if camera.CameraType == Enum.CameraType.Custom and camera.Focus.Position == character.Head.Position then  -- Fully zoomed in
        camera.CFrame = torso.CFrame  -- First-person view follows torso
        print("First-person view, camera follows torso")
    else  -- Third-person view
        camera.CFrame = camera.CFrame:Lerp(torso.CFrame * CFrame.new(0, 5, -10), 0.1)  -- Smooth transition
        print("Third-person view, camera follows torso")
    end
end

-- Connect to character added event to handle character respawns
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    torso = character:WaitForChild("Torso") or character:WaitForChild("UpperTorso")
end)

-- Continuously update the camera's position and orientation
game:GetService("RunService").RenderStepped:Connect(updateCamera)
